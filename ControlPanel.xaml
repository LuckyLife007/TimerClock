<Window x:Class="TimerClockApp.ControlPanel"
        x:ClassModifier="public"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:TimerClockApp"
        mc:Ignorable="d"
        Title="Control Panel"
        Icon="/Resources/app_icon.ico"
        Height="250"
        Width="300"
        AllowsTransparency="True"
        WindowStyle="None"
        Background="LightGray"
        ResizeMode="NoResize"
        MouseEnter="ControlPanel_MouseEnter"
        MouseLeave="ControlPanel_MouseLeave">

        <!-- Window Resources -->
        <Window.Resources>
                <Style x:Key="ModeButtonStyle"
                       TargetType="Button">
                        <Setter Property="Width"
                                Value="80"/>
                        <Setter Property="Height"
                                Value="30"/>
                        <Setter Property="Margin"
                                Value="5"/>
                        <Style.Triggers>
                                <DataTrigger Binding="{Binding IsSelected}"
                                             Value="True">
                                        <Setter Property="Background"
                                                Value="LightBlue"/>
                                        <Setter Property="FontWeight"
                                                Value="Bold"/>
                                </DataTrigger>
                                <Trigger Property="IsEnabled"
                                         Value="False">
                                        <Setter Property="Opacity"
                                                Value="0.5"/>
                                </Trigger>
                        </Style.Triggers>
                </Style>

                <Style x:Key="ControlButtonStyle"
                       TargetType="Button">
                        <Setter Property="Width"
                                Value="80"/>
                        <Setter Property="Height"
                                Value="30"/>
                        <Setter Property="Margin"
                                Value="5"/>
                </Style>
        </Window.Resources>

        <!-- Main Grid Layout -->
        <Border BorderBrush="Black"
                BorderThickness="0.5">
                <Grid Background="LightGray"
                      IsHitTestVisible="True">
                        <!-- Define rows for the layout -->
                        <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <!-- Window controls -->
                                <RowDefinition Height="Auto"/>
                                <!-- Mini display -->
                                <RowDefinition Height="Auto"/>
                                <!-- Mode buttons -->
                                <RowDefinition Height="Auto"/>
                                <!-- Timer input -->
                                <RowDefinition Height="Auto"/>
                                <!-- Control buttons -->
                        </Grid.RowDefinitions>

                        <!-- Window Controls (Draggable Icon, Minimize, Close, Settings) -->
                        <Border BorderBrush="Black"
                                BorderThickness="0.5">
                                <Grid Grid.Row="0">
                                        <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>

                                        <!-- Draggable Icon on the left -->
                                        <Button x:Name="DragHandle"
                                                Grid.Column="0"
                                                Content="⋮⋮⋮⋮⋮⋮⋮⋮⋮⋮ Control Panel ⋮⋮⋮⋮⋮⋮⋮⋮⋮⋮"
                                                Style="{StaticResource SettingsIconButtonStyle}"
                                                Margin="2"
                                                Cursor="SizeAll"
                                                PreviewMouseLeftButtonDown="DragHandle_PreviewMouseLeftButtonDown"/>

                                        <!-- Other controls on the right -->
                                        <StackPanel Grid.Column="1"
                                                    Orientation="Horizontal"
                                                    HorizontalAlignment="Right">
                                                <Button x:Name="SettingsButton"
                                                        Content="⚙️"
                                                        Style="{StaticResource SettingsIconButtonStyle}"
                                                        Click="SettingsButton_Click"
                                                        Margin="2"/>
                                                <Button Content="─"
                                                        Style="{StaticResource SettingsIconButtonStyle}"
                                                        Click="MinimizeButton_Click"
                                                        Margin="2"/>
                                                <Button Content="✕"
                                                        Style="{StaticResource SettingsIconButtonStyle}"
                                                        Click="CloseButton_Click"
                                                        Margin="2"/>
                                        </StackPanel>
                                </Grid>
                        </Border>

                        <!-- Mini Display -->
                        <Grid Grid.Row="1"
                              HorizontalAlignment="Center"
                              VerticalAlignment="Center"
                              Margin="0,0,0,10">
                                <TextBlock x:Name="MiniDisplay"
                                           HorizontalAlignment="Center"
                                           VerticalAlignment="Center"
                                           FontSize="32"
                                           Text="{Binding TimeDisplay}"/>
                                <Border x:Name="MiniWarningTimeIndicator"
                                        Background="Orange"
                                        Opacity="0"
                                        HorizontalAlignment="Stretch"
                                        VerticalAlignment="Stretch"/>
                                <Border x:Name="MiniNegativeTimeIndicator"
                                        Background="Red"
                                        Opacity="0"
                                        HorizontalAlignment="Stretch"
                                        VerticalAlignment="Stretch"/>
                        </Grid>

                        <!-- Mode Buttons (Timer, Clock, Auto) -->
                        <StackPanel Grid.Row="2"
                                    Orientation="Horizontal"
                                    HorizontalAlignment="Center"
                                    Margin="0,0,0,5">
                                <Button Content="Timer"
                                        Style="{StaticResource ModeButtonStyle}"
                                        Command="{Binding TimerModeCommand}"
                                        IsEnabled="{Binding TimerModeEnabled}"
                                        Background="{Binding TimerModeBackground}"/>
                                <Button Content="Clock"
                                        Style="{StaticResource ModeButtonStyle}"
                                        Command="{Binding ClockModeCommand}"
                                        IsEnabled="{Binding ClockModeEnabled}"
                                        Background="{Binding ClockModeBackground}"/>
                                <Button Content="Auto"
                                        Style="{StaticResource ModeButtonStyle}"
                                        Command="{Binding AutoModeCommand}"
                                        IsEnabled="{Binding AutoModeEnabled}"
                                        Background="{Binding AutoModeBackground}"/>
                        </StackPanel>

                        <!-- Timer Input -->
                        <StackPanel Grid.Row="3"
                                    Orientation="Horizontal"
                                    HorizontalAlignment="Center"
                                    Margin="0,0,0,5">
                                <TextBlock Text="Minutes: "
                                           VerticalAlignment="Center"/>
                                <TextBox x:Name="TimerInput"
                                         Width="60"
                                         Text="{Binding TimerMinutes, UpdateSourceTrigger=PropertyChanged}"
                                         PreviewTextInput="TimerInput_PreviewTextInput"/>
                        </StackPanel>

                        <!-- Control Buttons (Start, Play/Pause, Reset) -->
                        <StackPanel Grid.Row="4"
                                    Orientation="Horizontal"
                                    HorizontalAlignment="Center"
                                    Margin="0,0,0,5">
                                <Button Content="Start"
                                        Style="{StaticResource ControlButtonStyle}"
                                        Command="{Binding StartCommand}"/>
                                <Button Content="{Binding PlayPauseButtonText}"
                                        Style="{StaticResource ControlButtonStyle}"
                                        Command="{Binding PlayPauseCommand}"
                                        IsEnabled="{Binding IsPlayPauseEnabled}"/>
                                <Button Content="Set/Reset"
                                        Style="{StaticResource ControlButtonStyle}"
                                        Command="{Binding ResetCommand}"/>
                        </StackPanel>
                </Grid>
        </Border>
</Window>